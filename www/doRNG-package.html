<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
<title>doRNG-package. doRNG 1.5</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="author" content="
  Renaud Gaujoux &lt;a href='mailto:renaud@cbio.uct.ac.za'&gt;renaud@cbio.uct.ac.za&lt;/a&gt;,

  Maintainer: Renaud Gaujoux &lt;a href='mailto:renaud@cbio.uct.ac.za'&gt;renaud@cbio.uct.ac.za&lt;/a&gt;,
">

<link href="css/bootstrap.css" rel="stylesheet">
<link href="css/bootstrap-responsive.css" rel="stylesheet">
<link href="css/highlight.css" rel="stylesheet">
<link href="css/staticdocs.css" rel="stylesheet">

<!--[if lt IE 9]>
  <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
  </head>

  <body>
    <div class="navbar">
  <div class="navbar-inner">
    <div class = "container">
      <a class="brand" href="index.html">doRNG 1.5</a>
      <div class="nav">
        <ul class="nav">
        <li><a href="_MAN.html"><i class="icon-home icon-white"></i> Index</a></li>
       </ul>
   	  </div>
    </div>
  </div>
</div>

    <div class="container">
      <header>
        
      </header>
      
      <h1>Generic Reproducible Parallel Backend for foreach Loops</h1>

<div class="row">
  <div class="span8">
        
    <div class="Description">
      <h2>Description</h2>
      
      <p>The <em>doRNG</em> package provides functions to perform
  reproducible parallel foreach loops, using independent
  random streams as generated by L'Ecuyer's combined
  multiple-recursive generator [L'Ecuyer (1999)]. It
  enables to easily convert standard 
  fully reproducible loops, independently of the number of
  workers, the task scheduling strategy, or the chosen
  parallel environment and associated foreach backend. It
  has been tested with the following foreach backend: doMC,
  doSNOW, doMPI.</p>
  
    </div>

    <div class="Details">
      <h2>Details</h2>
      
      <p><table><tr><td> Package: </td>
<td> doRNG</td>
</tr><tr><td> Type: </td>
<td>
  Package</td>
</tr><tr><td> Version: </td>
<td> 1.2.3</td>
</tr><tr><td> Date: </td>
<td>
  2012-03-30</td>
</tr><tr><td> License: </td>
<td> GPL (>= 2)</td>
</tr><tr><td> LazyLoad: </td>
<td>
  yes</td>
</tr></table></p>
  
    </div>

    <div class="References">
      <h2>References</h2>
      
      <p>L'Ecuyer P (1999). "Good parameters and implementations
  for combined multiple recursive random number
  generators." _Operations Research_, *47*(1). <URL:
  http://www.jstor.org/stable/10.2307/222902>.</p>
  
    </div>
    
    <h2 id="examples">Examples</h2>
    <pre class="examples"><div class='input'><span class="comment"># register parallel backend</span>
<span class="functioncall"><a href='http://www.inside-r.org/r-doc/base/library'>library</a></span><span class="keyword">(</span><span class="symbol">doParallel</span><span class="keyword">)</span></div>
<strong class='message'>Loading required package: iterators</strong>
<strong class='message'>Loading required package: parallel</strong>
<div class='input'><span class="symbol">cl</span> <span class="assignement">&lt;-</span> <span class="functioncall"><a href='http://www.inside-r.org/r-doc/parallel/makeCluster'>makeCluster</a></span><span class="keyword">(</span><span class="number">2</span><span class="keyword">)</span>
<span class="functioncall"><a href='http://www.inside-r.org/r-doc/doParallel/registerDoParallel'>registerDoParallel</a></span><span class="keyword">(</span><span class="symbol">cl</span><span class="keyword">)</span>

<span class="comment">## standard %dopar% loop are not reproducible</span>
<span class="functioncall"><a href='http://www.inside-r.org/r-doc/base/Random'>set.seed</a></span><span class="keyword">(</span><span class="number">123</span><span class="keyword">)</span>
<span class="symbol">r1</span> <span class="assignement">&lt;-</span> <span class="functioncall"><a href='http://www.inside-r.org/r-doc/foreach/foreach'>foreach</a></span><span class="keyword">(</span><span class="argument">i</span><span class="argument">=</span><span class="number">1</span><span class="keyword">:</span><span class="number">4</span><span class="keyword">)</span> <span class="keyword">%dopar%</span><span class="keyword">{</span> <span class="functioncall"><a href='http://www.inside-r.org/r-doc/stats/Uniform'>runif</a></span><span class="keyword">(</span><span class="number">1</span><span class="keyword">)</span> <span class="keyword">}</span>
<span class="functioncall"><a href='http://www.inside-r.org/r-doc/base/Random'>set.seed</a></span><span class="keyword">(</span><span class="number">123</span><span class="keyword">)</span>
<span class="symbol">r2</span> <span class="assignement">&lt;-</span> <span class="functioncall"><a href='http://www.inside-r.org/r-doc/foreach/foreach'>foreach</a></span><span class="keyword">(</span><span class="argument">i</span><span class="argument">=</span><span class="number">1</span><span class="keyword">:</span><span class="number">4</span><span class="keyword">)</span> <span class="keyword">%dopar%</span><span class="keyword">{</span> <span class="functioncall"><a href='http://www.inside-r.org/r-doc/stats/Uniform'>runif</a></span><span class="keyword">(</span><span class="number">1</span><span class="keyword">)</span> <span class="keyword">}</span>
<span class="functioncall"><a href='http://www.inside-r.org/r-doc/base/identical'>identical</a></span><span class="keyword">(</span><span class="symbol">r1</span><span class="keyword">,</span> <span class="symbol">r2</span><span class="keyword">)</span></div>
<div class='output'>[1] FALSE
</div>
<div class='input'>

<span class="comment">## %dorng% loops _are_ reproducible</span>
<span class="functioncall"><a href='http://www.inside-r.org/r-doc/base/Random'>set.seed</a></span><span class="keyword">(</span><span class="number">123</span><span class="keyword">)</span>
<span class="symbol">r1</span> <span class="assignement">&lt;-</span> <span class="functioncall"><a href='http://www.inside-r.org/r-doc/foreach/foreach'>foreach</a></span><span class="keyword">(</span><span class="argument">i</span><span class="argument">=</span><span class="number">1</span><span class="keyword">:</span><span class="number">4</span><span class="keyword">)</span> <span class="keyword">%dorng%</span><span class="keyword">{</span> <span class="functioncall"><a href='http://www.inside-r.org/r-doc/stats/Uniform'>runif</a></span><span class="keyword">(</span><span class="number">1</span><span class="keyword">)</span> <span class="keyword">}</span></div>
<strong class='message'>Loading required package: pkgmaker</strong>
<strong class='message'>Loading required package: digest</strong>
<strong class='message'>Loading required package: stringr</strong>
<strong class='message'>Loading required package: codetools</strong>
<div class='input'><span class="functioncall"><a href='http://www.inside-r.org/r-doc/base/Random'>set.seed</a></span><span class="keyword">(</span><span class="number">123</span><span class="keyword">)</span>
<span class="symbol">r2</span> <span class="assignement">&lt;-</span> <span class="functioncall"><a href='http://www.inside-r.org/r-doc/foreach/foreach'>foreach</a></span><span class="keyword">(</span><span class="argument">i</span><span class="argument">=</span><span class="number">1</span><span class="keyword">:</span><span class="number">4</span><span class="keyword">)</span> <span class="keyword">%dorng%</span><span class="keyword">{</span> <span class="functioncall"><a href='http://www.inside-r.org/r-doc/stats/Uniform'>runif</a></span><span class="keyword">(</span><span class="number">1</span><span class="keyword">)</span> <span class="keyword">}</span>
<span class="functioncall"><a href='http://www.inside-r.org/r-doc/base/identical'>identical</a></span><span class="keyword">(</span><span class="symbol">r1</span><span class="keyword">,</span> <span class="symbol">r2</span><span class="keyword">)</span></div>
<div class='output'>[1] TRUE
</div>
<div class='input'>

<span class="comment"># alternative way of seeding</span>
<span class="symbol">a1</span> <span class="assignement">&lt;-</span> <span class="functioncall"><a href='http://www.inside-r.org/r-doc/foreach/foreach'>foreach</a></span><span class="keyword">(</span><span class="argument">i</span><span class="argument">=</span><span class="number">1</span><span class="keyword">:</span><span class="number">4</span><span class="keyword">,</span> <span class="argument">.options.RNG</span><span class="argument">=</span><span class="number">123</span><span class="keyword">)</span> <span class="keyword">%dorng%</span><span class="keyword">{</span> <span class="functioncall"><a href='http://www.inside-r.org/r-doc/stats/Uniform'>runif</a></span><span class="keyword">(</span><span class="number">1</span><span class="keyword">)</span> <span class="keyword">}</span>
<span class="symbol">a2</span> <span class="assignement">&lt;-</span> <span class="functioncall"><a href='http://www.inside-r.org/r-doc/foreach/foreach'>foreach</a></span><span class="keyword">(</span><span class="argument">i</span><span class="argument">=</span><span class="number">1</span><span class="keyword">:</span><span class="number">4</span><span class="keyword">,</span> <span class="argument">.options.RNG</span><span class="argument">=</span><span class="number">123</span><span class="keyword">)</span> <span class="keyword">%dorng%</span><span class="keyword">{</span> <span class="functioncall"><a href='http://www.inside-r.org/r-doc/stats/Uniform'>runif</a></span><span class="keyword">(</span><span class="number">1</span><span class="keyword">)</span> <span class="keyword">}</span>
<span class="functioncall"><a href='http://www.inside-r.org/r-doc/base/identical'>identical</a></span><span class="keyword">(</span><span class="symbol">a1</span><span class="keyword">,</span> <span class="symbol">a2</span><span class="keyword">)</span> <span class="keyword">&amp;&amp;</span> <span class="functioncall"><a href='http://www.inside-r.org/r-doc/base/identical'>identical</a></span><span class="keyword">(</span><span class="symbol">a1</span><span class="keyword">,</span> <span class="symbol">r1</span><span class="keyword">)</span></div>
<div class='output'>[1] TRUE
</div>
<div class='input'>

<span class="comment">## sequences of %dorng% loops _are_ reproducible</span>
<span class="functioncall"><a href='http://www.inside-r.org/r-doc/base/Random'>set.seed</a></span><span class="keyword">(</span><span class="number">123</span><span class="keyword">)</span>
<span class="symbol">s1</span> <span class="assignement">&lt;-</span> <span class="functioncall"><a href='http://www.inside-r.org/r-doc/foreach/foreach'>foreach</a></span><span class="keyword">(</span><span class="argument">i</span><span class="argument">=</span><span class="number">1</span><span class="keyword">:</span><span class="number">4</span><span class="keyword">)</span> <span class="keyword">%dorng%</span><span class="keyword">{</span> <span class="functioncall"><a href='http://www.inside-r.org/r-doc/stats/Uniform'>runif</a></span><span class="keyword">(</span><span class="number">1</span><span class="keyword">)</span> <span class="keyword">}</span>
<span class="symbol">s2</span> <span class="assignement">&lt;-</span> <span class="functioncall"><a href='http://www.inside-r.org/r-doc/foreach/foreach'>foreach</a></span><span class="keyword">(</span><span class="argument">i</span><span class="argument">=</span><span class="number">1</span><span class="keyword">:</span><span class="number">4</span><span class="keyword">)</span> <span class="keyword">%dorng%</span><span class="keyword">{</span> <span class="functioncall"><a href='http://www.inside-r.org/r-doc/stats/Uniform'>runif</a></span><span class="keyword">(</span><span class="number">1</span><span class="keyword">)</span> <span class="keyword">}</span>
<span class="functioncall"><a href='http://www.inside-r.org/r-doc/base/identical'>identical</a></span><span class="keyword">(</span><span class="symbol">s1</span><span class="keyword">,</span> <span class="symbol">r1</span><span class="keyword">)</span> <span class="keyword">&amp;&amp;</span> <span class="keyword">!</span><span class="functioncall"><a href='http://www.inside-r.org/r-doc/base/identical'>identical</a></span><span class="keyword">(</span><span class="symbol">s1</span><span class="keyword">,</span> <span class="symbol">s2</span><span class="keyword">)</span></div>
<div class='output'>[1] TRUE
</div>
<div class='input'>

<span class="functioncall"><a href='http://www.inside-r.org/r-doc/base/Random'>set.seed</a></span><span class="keyword">(</span><span class="number">123</span><span class="keyword">)</span>
<span class="symbol">s1.2</span> <span class="assignement">&lt;-</span> <span class="functioncall"><a href='http://www.inside-r.org/r-doc/foreach/foreach'>foreach</a></span><span class="keyword">(</span><span class="argument">i</span><span class="argument">=</span><span class="number">1</span><span class="keyword">:</span><span class="number">4</span><span class="keyword">)</span> <span class="keyword">%dorng%</span><span class="keyword">{</span> <span class="functioncall"><a href='http://www.inside-r.org/r-doc/stats/Uniform'>runif</a></span><span class="keyword">(</span><span class="number">1</span><span class="keyword">)</span> <span class="keyword">}</span>
<span class="symbol">s2.2</span> <span class="assignement">&lt;-</span> <span class="functioncall"><a href='http://www.inside-r.org/r-doc/foreach/foreach'>foreach</a></span><span class="keyword">(</span><span class="argument">i</span><span class="argument">=</span><span class="number">1</span><span class="keyword">:</span><span class="number">4</span><span class="keyword">)</span> <span class="keyword">%dorng%</span><span class="keyword">{</span> <span class="functioncall"><a href='http://www.inside-r.org/r-doc/stats/Uniform'>runif</a></span><span class="keyword">(</span><span class="number">1</span><span class="keyword">)</span> <span class="keyword">}</span>
<span class="functioncall"><a href='http://www.inside-r.org/r-doc/base/identical'>identical</a></span><span class="keyword">(</span><span class="symbol">s1</span><span class="keyword">,</span> <span class="symbol">s1.2</span><span class="keyword">)</span> <span class="keyword">&amp;&amp;</span> <span class="functioncall"><a href='http://www.inside-r.org/r-doc/base/identical'>identical</a></span><span class="keyword">(</span><span class="symbol">s2</span><span class="keyword">,</span> <span class="symbol">s2.2</span><span class="keyword">)</span></div>
<div class='output'>[1] TRUE
</div>
<div class='input'>

<span class="comment">## Non-invasive way of converting %dopar% loops into reproducible loops</span>
<span class="functioncall"><a href='registerDoRNG.html'>registerDoRNG</a></span><span class="keyword">(</span><span class="number">123</span><span class="keyword">)</span>
<span class="symbol">s3</span> <span class="assignement">&lt;-</span> <span class="functioncall"><a href='http://www.inside-r.org/r-doc/foreach/foreach'>foreach</a></span><span class="keyword">(</span><span class="argument">i</span><span class="argument">=</span><span class="number">1</span><span class="keyword">:</span><span class="number">4</span><span class="keyword">)</span> <span class="keyword">%dopar%</span><span class="keyword">{</span> <span class="functioncall"><a href='http://www.inside-r.org/r-doc/stats/Uniform'>runif</a></span><span class="keyword">(</span><span class="number">1</span><span class="keyword">)</span> <span class="keyword">}</span>
<span class="symbol">s4</span> <span class="assignement">&lt;-</span> <span class="functioncall"><a href='http://www.inside-r.org/r-doc/foreach/foreach'>foreach</a></span><span class="keyword">(</span><span class="argument">i</span><span class="argument">=</span><span class="number">1</span><span class="keyword">:</span><span class="number">4</span><span class="keyword">)</span> <span class="keyword">%dopar%</span><span class="keyword">{</span> <span class="functioncall"><a href='http://www.inside-r.org/r-doc/stats/Uniform'>runif</a></span><span class="keyword">(</span><span class="number">1</span><span class="keyword">)</span> <span class="keyword">}</span>
<span class="functioncall"><a href='http://www.inside-r.org/r-doc/base/identical'>identical</a></span><span class="keyword">(</span><span class="symbol">s3</span><span class="keyword">,</span> <span class="symbol">s1</span><span class="keyword">)</span> <span class="keyword">&amp;&amp;</span> <span class="functioncall"><a href='http://www.inside-r.org/r-doc/base/identical'>identical</a></span><span class="keyword">(</span><span class="symbol">s4</span><span class="keyword">,</span> <span class="symbol">s2</span><span class="keyword">)</span></div>
<div class='output'>[1] TRUE
</div>
<div class='input'>

<span class="functioncall"><a href='http://www.inside-r.org/r-doc/parallel/makeCluster'>stopCluster</a></span><span class="keyword">(</span><span class="symbol">cl</span><span class="keyword">)</span></div></pre>
  </div>
  <div class="span4">
    <!-- <ul>
      <li>doRNG-package</li>
    </ul>
    <ul>
      <li>package</li>
    </ul> -->
      
    <h2>See also</h2>
    
  <code><a href='infoDoRNG.html'>doRNG</a></code>, <code>RNGseq</code>

    
    <h2>Author</h2>
    
  Renaud Gaujoux <a href='mailto:renaud@cbio.uct.ac.za'>renaud@cbio.uct.ac.za</a>,

  Maintainer: Renaud Gaujoux <a href='mailto:renaud@cbio.uct.ac.za'>renaud@cbio.uct.ac.za</a>,

    
  </div>
</div>
      
      <footer>
      <p class="pull-right"><a href="#">Back to top</a></p>
<p>Built by <a href="https://github.com/hadley/staticdocs">staticdocs</a>. Styled with <a href="http://twitter.github.com/bootstrap">bootstrap</a>.</p>
      </footer>
    </div>
  </body>
</html>